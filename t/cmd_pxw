#!/bin/sh
# GPL 3+ - Copyright (C) 2012  pancake, Edd Barrett, Simon Ruderich
for a in . .. ../.. ; do [ -e $a/tests.sh ] && . $a/tests.sh ; done


NAME='pxw cfg.bigendian=true'
BROKEN=
FILE=../b/files/hello-linux-x86_64
ARGS=
CMDS='e cfg.bigendian=true
pxw'
EXPECT='0x00400410  0x31ed4989 0xd15e4889 0xe24883e4 0xf0505449  1.I..^H..H...PTI
0x00400420  0xc7c0b005 0x400048c7 0xc1200540 0x0048c7c7  ....@.H.. .@.H..
0x00400430  0xfc044000 0xe8b7ffff 0xfff46690 0x0f1f4000  ..@.......f...@.
0x00400440  0xb8170960 0x0055482d 0x10096000 0x4883f80e  ...`.UH-..`.H...
0x00400450  0x4889e577 0x025dc3b8 0x00000000 0x4885c074  H..w.]......H..t
0x00400460  0xf45dbf10 0x096000ff 0xe00f1f80 0x00000000  .]...`..........
0x00400470  0xb8100960 0x0055482d 0x10096000 0x48c1f803  ...`.UH-..`.H...
0x00400480  0x4889e548 0x89c248c1 0xea3f4801 0xd04889c6  H..H..H..?H..H..
0x00400490  0x48d1fe75 0x025dc3ba 0x00000000 0x4885d274  H..u.]......H..t
0x004004a0  0xf45dbf10 0x096000ff 0xe20f1f80 0x00000000  .]...`..........
0x004004b0  0x803d5904 0x20000075 0x11554889 0xe5e87eff  .=Y. ..u.UH...~.
0x004004c0  0xffff5dc6 0x05460420 0x0001f3c3 0x0f1f4000  ..]..F. ......@.
0x004004d0  0x48833d18 0x02200000 0x741bb800 0x00000048  H.=.. ..t......H
0x004004e0  0x85c07411 0x55bff006 0x60004889 0xe5ffd05d  ..t.U...`.H....]
0x004004f0  0xe97bffff 0xffe976ff 0xffff6690 0x554889e5  .{....v...f.UH..
0x00400500  0xbfc40540 0x00e8d6fe 0xffffb800 0x0000005d  ...@...........]
'
run_test

NAME='pxw cfg.bigendian=false'
BROKEN=
FILE=../b/files/hello-linux-x86_64
ARGS=
CMDS='e cfg.bigendian=false
pxw'
EXPECT='0x00400410  0x8949ed31 0x89485ed1 0xe48348e2 0x495450f0  1.I..^H..H...PTI
0x00400420  0x05b0c0c7 0xc7480040 0x400520c1 0xc7c74800  ....@.H.. .@.H..
0x00400430  0x004004fc 0xffffb7e8 0x9066f4ff 0x00401f0f  ..@.......f...@.
0x00400440  0x600917b8 0x2d485500 0x00600910 0x0ef88348  ...`.UH-..`.H...
0x00400450  0x77e58948 0xb8c35d02 0x00000000 0x74c08548  H..w.]......H..t
0x00400460  0x10bf5df4 0xff006009 0x801f0fe0 0x00000000  .]...`..........
0x00400470  0x600910b8 0x2d485500 0x00600910 0x03f8c148  ...`.UH-..`.H...
0x00400480  0x48e58948 0xc148c289 0x01483fea 0xc68948d0  H..H..H..?H..H..
0x00400490  0x75fed148 0xbac35d02 0x00000000 0x74d28548  H..u.]......H..t
0x004004a0  0x10bf5df4 0xff006009 0x801f0fe2 0x00000000  .]...`..........
0x004004b0  0x04593d80 0x75000020 0x89485511 0xff7ee8e5  .=Y. ..u.UH...~.
0x004004c0  0xc65dffff 0x20044605 0xc3f30100 0x00401f0f  ..]..F. ......@.
0x004004d0  0x183d8348 0x00002002 0x00b81b74 0x48000000  H.=.. ..t......H
0x004004e0  0x1174c085 0x06f0bf55 0x89480060 0x5dd0ffe5  ..t.U...`.H....]
0x004004f0  0xffff7be9 0xff76e9ff 0x9066ffff 0xe5894855  .{....v...f.UH..
0x00400500  0x4005c4bf 0xfed6e800 0x00b8ffff 0x5d000000  ...@...........]
'
run_test