#!/bin/sh
# GPL 3+ - Copyright (C) 2012  pancake, Edd Barrett, Simon Ruderich
for a in . .. ../.. ; do [ -e $a/tests.sh ] && . $a/tests.sh ; done

NAME='ik java db keys for a class file'
BROKEN=
FILE=malloc://1024
ARGS=
CMDS='
e asm.comments=false
e asm.cmtflgrefs=false
e scr.color=false
e asm.lines=false
e asm.xrefs=false
wx cafebabe00000032003a070002010014546573745661726961626c6553776974636855700700040100106a6176612f6c616e672f4f626a6563740100063c696e69743e010003282956010004436f64650a000300090c0005000601000f4c696e654e756d6265725461626c650100124c6f63616c5661726961626c655461626c65010004746869730100164c546573745661726961626c6553776974636855703b010014546573744d756c7469706c655661726961626c650a001000120700110100116a6176612f6c616e672f496e74656765720c0013001401000776616c75654f660100162849294c6a6176612f6c616e672f496e74656765723b0800160100067472796f6e65090018001a0700190100106a6176612f6c616e672f53797374656d0c001b001c0100036f75740100154c6a6176612f696f2f5072696e7453747265616d3b07001e0100176a6176612f6c616e672f537472696e674275696c646572080020010011417474656d7074696e67207072696e74200a001d00220c00050023010015284c6a6176612f6c616e672f537472696e673b29560a001d00250c00260027010006617070656e6401002d284c6a6176612f6c616e672f537472696e673b294c6a6176612f6c616e672f537472696e674275696c6465723b0a001d00290c002a002b010008746f537472696e6701001428294c6a6176612f6c616e672f537472696e673b0a002d002f07002e0100136a6176612f696f2f5072696e7453747265616d0c003000230100057072696e74010001690100134c6a6176612f6c616e672f496e74656765723b01000170010001490100016b0100124c6a6176612f6c616e672f537472696e673b0100016a01000a536f7572636546696c65010019546573745661726961626c6553776974636855702e6a617661002100010003000000000002000100050006000100070000002f00010001000000052ab70008b100000002000a00000006000100000002000b0000000c000100000005000c000d00000008000e0006000100070000008100040004000000251064b8000f4b10643c12154d033eb20017bb001d59121fb700212cb60024b60028b6002cb100000002000a0000001a0006000000040006000500090006000c0007000e000800240009000b0000002a00040006001f0031003200000009001c003300340001000c0019003500360002000e001700370034000300010038000000020039
ib
af;pdf;ik;
'
EXPECT='/ (fcn) sym.TestVariableSwitchUp.TestMultipleVariable 37
| 0x000002fd    1064         bipush 100
| 0x000002ff    b8000f       invokestatic java/lang/Integer/valueOf(I)Ljava/lang/Integer;
|    0x00000000(0x0)
| 0x00000302    4b           astore_0
| 0x00000303    1064         bipush 100
| 0x00000305    3c           istore_1
| 0x00000306    1215         ldc "tryone"
| 0x00000308    4d           astore_2
| 0x00000309    03           iconst_0
| 0x0000030a    3e           istore_3
| 0x0000030b    b20017       getstatic java/lang/System/out Ljava/io/PrintStream;
| 0x0000030e    bb001d       new java/lang/StringBuilder 
| 0x00000311    59           dup
| 0x00000312    121f         ldc "Attempting print "
| 0x00000314    b70021       invokespecial java/lang/StringBuilder/<init>(Ljava/lang/String;)V
|    0x00000000(0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0)
| 0x00000317    2c           aload_2
| 0x00000318    b60024       invokevirtual java/lang/StringBuilder/append(Ljava/lang/String;)Ljava/lang/StringBuilder;
|    0x00000000(0x0)
| 0x0000031b    b60028       invokevirtual java/lang/StringBuilder/toString()Ljava/lang/String;
|    0x00000000()
| 0x0000031e    b6002c       invokevirtual java/io/PrintStream/print(Ljava/lang/String;)V
|    0x00000000()
\ 0x00000321    b1           return
TestVariableSwitchUp.cp.0=0.0x0000.NULL
TestVariableSwitchUp.cp.1=1.0x000a.Class.2
TestVariableSwitchUp.cp.2=2.0x000d.Utf8.20.546573745661726961626c655377697463685570
TestVariableSwitchUp.cp.3=3.0x0024.Class.4
TestVariableSwitchUp.cp.4=4.0x0027.Utf8.16.6a6176612f6c616e672f4f626a656374
TestVariableSwitchUp.cp.5=5.0x003a.Utf8.6.3c696e69743e
TestVariableSwitchUp.cp.6=6.0x0043.Utf8.3.282956
TestVariableSwitchUp.cp.7=7.0x0049.Utf8.4.436f6465
TestVariableSwitchUp.cp.8=8.0x0050.MethodRef.3.9
TestVariableSwitchUp.cp.9=9.0x0055.NameAndType.5.6
TestVariableSwitchUp.cp.10=10.0x005a.Utf8.15.4c696e654e756d6265725461626c65
TestVariableSwitchUp.cp.11=11.0x006c.Utf8.18.4c6f63616c5661726961626c655461626c65
TestVariableSwitchUp.cp.12=12.0x0081.Utf8.4.74686973
TestVariableSwitchUp.cp.13=13.0x0088.Utf8.22.4c546573745661726961626c6553776974636855703b
TestVariableSwitchUp.cp.14=14.0x00a1.Utf8.20.546573744d756c7469706c655661726961626c65
TestVariableSwitchUp.cp.15=15.0x00b8.MethodRef.16.18
TestVariableSwitchUp.cp.16=16.0x00bd.Class.17
TestVariableSwitchUp.cp.17=17.0x00c0.Utf8.17.6a6176612f6c616e672f496e7465676572
TestVariableSwitchUp.cp.18=18.0x00d4.NameAndType.19.20
TestVariableSwitchUp.cp.19=19.0x00d9.Utf8.7.76616c75654f66
TestVariableSwitchUp.cp.20=20.0x00e3.Utf8.22.2849294c6a6176612f6c616e672f496e74656765723b
TestVariableSwitchUp.cp.21=21.0x00fc.String.22
TestVariableSwitchUp.cp.22=22.0x00ff.Utf8.6.7472796f6e65
TestVariableSwitchUp.cp.23=23.0x0108.FieldRef.24.26
TestVariableSwitchUp.cp.24=24.0x010d.Class.25
TestVariableSwitchUp.cp.25=25.0x0110.Utf8.16.6a6176612f6c616e672f53797374656d
TestVariableSwitchUp.cp.26=26.0x0123.NameAndType.27.28
TestVariableSwitchUp.cp.27=27.0x0128.Utf8.3.6f7574
TestVariableSwitchUp.cp.28=28.0x012e.Utf8.21.4c6a6176612f696f2f5072696e7453747265616d3b
TestVariableSwitchUp.cp.29=29.0x0146.Class.30
TestVariableSwitchUp.cp.30=30.0x0149.Utf8.23.6a6176612f6c616e672f537472696e674275696c646572
TestVariableSwitchUp.cp.31=31.0x0163.String.32
TestVariableSwitchUp.cp.32=32.0x0166.Utf8.17.417474656d7074696e67207072696e7420
TestVariableSwitchUp.cp.33=33.0x017a.MethodRef.29.34
TestVariableSwitchUp.cp.34=34.0x017f.NameAndType.5.35
TestVariableSwitchUp.cp.35=35.0x0184.Utf8.21.284c6a6176612f6c616e672f537472696e673b2956
TestVariableSwitchUp.cp.36=36.0x019c.MethodRef.29.37
TestVariableSwitchUp.cp.37=37.0x01a1.NameAndType.38.39
TestVariableSwitchUp.cp.38=38.0x01a6.Utf8.6.617070656e64
TestVariableSwitchUp.cp.39=39.0x01af.Utf8.45.284c6a6176612f6c616e672f537472696e673b294c6a6176612f6c616e672f537472696e674275696c6465723b
TestVariableSwitchUp.cp.40=40.0x01df.MethodRef.29.41
TestVariableSwitchUp.cp.41=41.0x01e4.NameAndType.42.43
TestVariableSwitchUp.cp.42=42.0x01e9.Utf8.8.746f537472696e67
TestVariableSwitchUp.cp.43=43.0x01f4.Utf8.20.28294c6a6176612f6c616e672f537472696e673b
TestVariableSwitchUp.cp.44=44.0x020b.MethodRef.45.47
TestVariableSwitchUp.cp.45=45.0x0210.Class.46
TestVariableSwitchUp.cp.46=46.0x0213.Utf8.19.6a6176612f696f2f5072696e7453747265616d
TestVariableSwitchUp.cp.47=47.0x0229.NameAndType.48.35
TestVariableSwitchUp.cp.48=48.0x022e.Utf8.5.7072696e74
TestVariableSwitchUp.cp.49=49.0x0236.Utf8.1.69
TestVariableSwitchUp.cp.50=50.0x023a.Utf8.19.4c6a6176612f6c616e672f496e74656765723b
TestVariableSwitchUp.cp.51=51.0x0250.Utf8.1.70
TestVariableSwitchUp.cp.52=52.0x0254.Utf8.1.49
TestVariableSwitchUp.cp.53=53.0x0258.Utf8.1.6b
TestVariableSwitchUp.cp.54=54.0x025c.Utf8.18.4c6a6176612f6c616e672f537472696e673b
TestVariableSwitchUp.cp.55=55.0x0271.Utf8.1.6a
TestVariableSwitchUp.cp.56=56.0x0275.Utf8.10.536f7572636546696c65
TestVariableSwitchUp.methods=0x02aa,0x02e7
TestVariableSwitchUp.0x02c0=TestVariableSwitchUp.0x02aa.method
TestVariableSwitchUp.0x02aa.method.code=0x02c0,0x0005
TestVariableSwitchUp.0x02aa.method.info=public,java/lang/Object,<init>,()V
TestVariableSwitchUp.0x02fd=TestVariableSwitchUp.0x02e7.method
TestVariableSwitchUp.0x02e7.method.code=0x02fd,0x0025
TestVariableSwitchUp.0x02e7.method.info=static,TestVariableSwitchUp,TestMultipleVariable,()V
'
FILTER='sed "s/^db = 0x[0-9a-f]*$/db = 42/"'
run_test

